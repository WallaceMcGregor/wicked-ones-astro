---
const { nombre, descripcion, relojes, imagen, bando, nivel } = Astro.props;

const romanos = ["I", "II", "III", "IV"];
const nivelRomano = romanos[nivel - 1] ?? nivel;

/** @param {string} bando */

---
<div class="w-72 min-h-[360px] bg-surface border border-secondary/30 rounded-lg overflow-hidden shadow-lg flex flex-col">
  <!-- Imagen principal con icono y nivel -->
  <div class="relative">
    <!-- Icono del bando -->
    <div class="absolute top-2 left-2">
      <iconify-icon
        icon={
          bando === "luz"
            ? "mdi:white-balance-sunny"
            : bando === "oscuridad"
              ? "mdi:moon-waning-crescent"
              : "mdi:circle-outline"
        }
        width="26" height="26" class="text-white"
      />
    </div>

    <!-- Nivel en número romano -->
    <div class="absolute top-2 right-2 text-sm bg-white text-background px-2 py-0.5 rounded">
      {nivelRomano}
    </div>

    <!-- Imagen de la facción -->
    <img 
      src={imagen} 
      alt={`Imagen de ${nombre}`} 
      class="w-full aspect-square object-cover rounded-t"
      loading="lazy"
    />
  </div>

  <!-- Contenido textual -->
  <div class="p-4 flex flex-col gap-2 flex-grow">
    <h3 class="text-lg font-bold text-primary">{nombre}</h3>

    <ul class="list-disc list-inside text-sm text-secondary space-y-1">
      {/* @ts-ignore */}
      {descripcion.map(punto => <li>{punto}</li>)}
    </ul>

    <div class="mt-4 space-y-3">
      {/* @ts-ignore */}
      {relojes.map((reloj) => (
        <div class="flex items-center gap-3">
          <img src={reloj.imagen} alt={reloj.nombre} class="w-8 h-8 object-contain" />
          <span class="text-sm text-secondary">{reloj.nombre}</span>
        </div>
      ))}
    </div>

  </div>
</div>
