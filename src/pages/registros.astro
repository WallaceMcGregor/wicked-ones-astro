---
import BaseLayout from "../layouts/BaseLayout.astro";

//Cargar todos los archivos de registros
const entradas = await Astro.glob("../content/registros/*.md");

//Ordenar por fecha descendente
entradas.sort((a, b) => new Date(b.frontmatter.date).getTime() - new Date(a.frontmatter.date).getTime());

// Funci칩n para formatear fechas en espa침ol
function formatearFecha(fechaStr) {
  const fecha = new Date(fechaStr);
  return fecha.toLocaleDateString("es-ES", {
    day: "numeric",
    month: "long",
    year: "numeric",
  });
}
---

<BaseLayout title="Registros de la campa침a">
  <main class="max-w-4xl mx-auto px-6 py-16">
    <h1 class="text-4xl font-bold text-primary font-serif mb-10 text-center">Registros de la campa침a</h1>

    <div class="space-y-8">
      {entradas.map((entrada) => (
        <article class="bg-surface border border-secondary/30 rounded p-6 shadow">
          <h2 class="text-2xl font-bold text-primary mb-2">{entrada.frontmatter.title}</h2>
          <p class="text-sm text-secondary mb-4">{formatearFecha(entrada.frontmatter.date)}</p>
          <p class="text-secondary">{entrada.frontmatter.resumen}</p>
        </article>
      ))}
    </div>
  </main>
</BaseLayout>